<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>SPV Dashboard - Manajemen Checklist & Asset</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-100">
  <div class="max-w-6xl mx-auto mt-8 p-4 bg-white shadow-md rounded">
    <!-- Header with Buttons -->
    <div class="flex items-center justify-between mb-8">
      <h1 class="text-2xl font-bold">Manajemen Checklist & Asset</h1>
      <div>
        <a href="/checklists/new" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded mr-2">
          + Buat Checklist Baru
        </a>
        <a href="/assets/new" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded">
          + Buat Asset Baru
        </a>
      </div>
    </div>
    
    <!-- Checklist Management Table -->
    <div class="mb-8">
      <h2 class="text-xl font-bold mb-4">Manajemen Checklist</h2>
      <table class="w-full text-left border-collapse">
        <thead>
          <tr class="bg-gray-200">
            <th class="p-2 border">Nama Checklist</th>
            <th class="p-2 border">Jumlah Aset Tersassign</th>
            <th class="p-2 border">Aksi</th>
          </tr>
        </thead>
        <tbody>
          <% checklists.forEach(checklist => { %>
            <tr>
              <td class="p-2 border"><%= checklist.title %></td>
              <td class="p-2 border"><%= checklist.assignmentCount || 0 %></td>
              <td class="p-2 border">
                <a href="/checklists/<%= checklist._id %>/edit" class="bg-yellow-500 hover:bg-yellow-600 text-white px-3 py-1 rounded">
                  Edit
                </a>
                <a href="/checklists/<%= checklist._id %>/delete" class="bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded ml-2" onclick="return confirm('Yakin ingin menghapus checklist ini?')">
                  Hapus
                </a>
                <a href="/checklists/<%= checklist._id %>/assign" class="bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded ml-2">
                  Assign
                </a>
              </td>
            </tr>
          <% }); %>
        </tbody>
      </table>
    </div>
    
    <!-- Asset Management Table -->
    <div>
      <h2 class="text-xl font-bold mb-4">Manajemen Asset</h2>
      <table class="w-full text-left border-collapse">
        <thead>
          <tr class="bg-gray-200">
            <th class="p-2 border">Nama Asset</th>
            <th class="p-2 border">Kategori</th>
            <th class="p-2 border">Lokasi</th>
            <th class="p-2 border">Lantai</th>
            <th class="p-2 border">Zona</th>
            <th class="p-2 border">Aksi</th>
          </tr>
        </thead>
        <tbody>
          <% assets.forEach(asset => { %>
            <tr>
              <td class="p-2 border"><%= asset.name %></td>
              <td class="p-2 border">
                <% if(asset.category && asset.category.name) { %>
                  <%= asset.category.name %>
                <% } else { %>
                  N/A
                <% } %>
              </td>
              <td class="p-2 border"><%= asset.location %></td>
              <td class="p-2 border">
                <% if(asset.floor && asset.floor.name) { %>
                  <%= asset.floor.name %>
                <% } else { %>
                  N/A
                <% } %>
              </td>
              <td class="p-2 border">
                <% if(asset.zone && asset.zone.name) { %>
                  <%= asset.zone.name %>
                <% } else { %>
                  N/A
                <% } %>
              </td>
              <td class="p-2 border">
                <a href="/assets/<%= asset._id %>/edit" class="bg-yellow-500 hover:bg-yellow-600 text-white px-3 py-1 rounded">
                  Edit
                </a>
                <a href="/assets/<%= asset._id %>/delete" class="bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded ml-2" onclick="return confirm('Yakin ingin menghapus asset ini?')">
                  Hapus
                </a>
              </td>
            </tr>
          <% }); %>
        </tbody>
      </table>
    </div>
    
  </div>
  
  <!-- Optional Navigation Links -->
  <div class="max-w-6xl mx-auto mt-4 flex justify-end space-x-4">
    <a href="/spv/dashboard" class="text-blue-500 hover:text-blue-700">Dashboard</a>
    <a href="/logout" class="text-blue-500 hover:text-blue-700">Logout</a>
  </div>
</body>
</html>
