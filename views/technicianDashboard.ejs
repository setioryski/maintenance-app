<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Technician Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-100">
  <div class="max-w-6xl mx-auto p-4">
    <h1 class="text-3xl font-bold mb-6 text-center">Technician Dashboard</h1>
    <h2 class="text-xl font-semibold mb-4">Checklist Assignments</h2>
    
    <table class="min-w-full bg-white shadow-md rounded overflow-hidden">
      <thead>
        <tr class="bg-gray-200">
          <th class="py-2 px-4">Asset Name</th>
          <th class="py-2 px-4">Checklist Title</th>
          <th class="py-2 px-4">Assigned Date</th>
          <th class="py-2 px-4">Status</th>
          <th class="py-2 px-4">Action</th>
        </tr>
      </thead>
      <tbody>
        <% assignments.forEach(function(assignment) { %>
          <tr class="border-b">
            <td class="py-2 px-4"><%= assignment.asset.name %></td>
            <td class="py-2 px-4"><%= assignment.checklist.title %></td>
            <td class="py-2 px-4"><%= new Date(assignment.assignedAt).toLocaleDateString() %></td>
            <td class="py-2 px-4">
              <% if (assignment.completedAt) { %>
                <span class="text-green-600 font-bold">Complete</span>
              <% } else { %>
                <span class="text-red-600 font-bold">Incomplete</span>
              <% } %>
            </td>
            <td class="py-2 px-4">
              <% if (!assignment.completedAt) { %>
                <a href="/technician/checklist/<%= assignment._id %>" class="bg-blue-500 hover:bg-blue-600 text-white py-1 px-3 rounded">
                  Do Checklist
                </a>
              <% } else { %>
                <a href="/technician/report/<%= assignment._id %>" class="bg-gray-500 hover:bg-gray-600 text-white py-1 px-3 rounded">
                  View Report
                </a>
              <% } %>
            </td>
          </tr>
        <% }); %>
      </tbody>
    </table>
    <!-- Optional link to view all completed reports -->
    <div class="mt-4 text-center">
      <a href="/technician/report" class="text-blue-500 hover:text-blue-700 font-semibold">View All Completed Checklist Reports</a>
    </div>
  </div>
  
  <!-- Navigation Links -->
  <div class="max-w-6xl mx-auto mt-4 flex justify-end space-x-4">
    <a href="/technician/dashboard" class="text-blue-500 hover:text-blue-700">Dashboard</a>
    <a href="/logout" class="text-blue-500 hover:text-blue-700">Logout</a>
  </div>
</body>
</html>
